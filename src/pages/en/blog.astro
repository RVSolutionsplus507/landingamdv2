---
import Layout from '../../layouts/Layout.astro';
import BlogBreadcrumbs from '../../components/BlogBreadcrumbs.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Blog articles data (English version)
const blogArticles: Array<{
  id: number;
  slug: string;
  title: string;
  excerpt: string;
  image: string;
  date: string;
  author: string;
  readTime: string;
  category: string;
  tags: string[];
}> = [
  {
    id: 1,
    slug: 'how-to-choose-perfect-size-mini-storage-unit',
    title: 'How to choose the perfect size for your mini storage unit',
    excerpt: 'Complete guide to determine what size mini storage unit you need based on your belongings and budget.',
    image: '/Images/carousel1.webp',
    date: '2024-03-15',
    author: 'Almacenajes Mini Depósitos',
    readTime: '5 min',
    category: 'Guides',
    tags: ['sizes', 'tips', 'storage']
  },
  {
    id: 2,
    slug: 'security-tips-storing-important-documents',
    title: 'Security tips for storing important documents',
    excerpt: 'Learn the best practices to protect your most valuable documents in a mini storage unit.',
    image: '/Images/carousel2.webp',
    date: '2024-03-10',
    author: 'Almacenajes Mini Depósitos',
    readTime: '4 min',
    category: 'Security',
    tags: ['documents', 'security', 'protection']
  },
  {
    id: 3,
    slug: 'organize-move-using-temporary-mini-storage',
    title: 'How to organize your move using a temporary mini storage unit',
    excerpt: 'Effective strategies to make your move easier using temporary storage.',
    image: '/Images/carousel3.webp',
    date: '2024-03-05',
    author: 'Almacenajes Mini Depósitos',
    readTime: '6 min',
    category: 'Moving',
    tags: ['moving', 'organization', 'temporary']
  },
  {
    id: 4,
    slug: 'advantages-mini-storage-vs-traditional-warehouse',
    title: 'Advantages of mini storage units vs. traditional warehouse',
    excerpt: 'Detailed comparison between modern mini storage units and traditional rental warehouses.',
    image: '/Images/carousel4.webp',
    date: '2024-02-28',
    author: 'Almacenajes Mini Depósitos',
    readTime: '7 min',
    category: 'Comparisons',
    tags: ['advantages', 'comparison', 'warehouse']
  },
  {
    id: 5,
    slug: 'prepare-items-long-term-storage',
    title: 'How to prepare your items for long-term storage',
    excerpt: 'Techniques and materials needed to protect your belongings during extended storage.',
    image: '/Images/carousel5.webp',
    date: '2024-02-20',
    author: 'Almacenajes Mini Depósitos',
    readTime: '8 min',
    category: 'Preservation',
    tags: ['preparation', 'long-term', 'preservation']
  }
];

const pageTitle = 'Blog - Almacenajes Minidepósitos';
const pageDescription = 'Tips, guides and news about storage and mini warehouses in Panama. Learn how to make the most of your storage space.';
---

<Layout 
  title={pageTitle}
  description={pageDescription}
>
  <!-- Schema.org BlogPosting structured data -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": 'Blog - Almacenajes Minidepósitos',
    "description": pageDescription,
    "url": 'https://almacenajes-minidepositos.com/en/blog',
    "publisher": {
      "@type": "Organization",
      "name": "Almacenajes Mini Depósitos",
      "url": "https://almacenajes-minidepositos.com"
    },
    "blogPost": blogArticles.map(article => ({
      "@type": "BlogPosting",
      "headline": article.title,
      "description": article.excerpt,
      "url": `https://almacenajes-minidepositos.com/en/blog/${article.slug}`,
      "datePublished": article.date,
      "author": {
        "@type": "Organization",
        "name": article.author
      },
      "image": `https://almacenajes-minidepositos.com${article.image}`,
      "articleSection": article.category,
      "keywords": article.tags.join(', ')
    }))
  })} />

  <main class="pt-16">
    <!-- Breadcrumbs -->
    <BlogBreadcrumbs />
    
    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-gray-50 to-gray-100 py-16 lg:py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-4xl lg:text-5xl font-bold text-[var(--color-dark)] mb-6">
            Blog - Almacenajes Minidepósitos
          </h1>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Expert tips, practical guides and the latest news about storage and mini warehouses in Panama.
          </p>
        </div>
      </div>
    </section>

    <!-- Blog Articles Grid -->
    <section class="py-16 lg:py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {blogArticles.map((article) => (
            <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
              <div class="relative">
                <img 
                  src={article.image} 
                  alt={article.title}
                  class="w-full h-48 object-cover"
                  loading="lazy"
                >
                <div class="absolute top-4 left-4">
                  <span class="bg-[var(--color-primary)] text-white px-3 py-1 rounded-full text-sm font-medium">
                    {article.category}
                  </span>
                </div>
              </div>
              
              <div class="p-6">
                <div class="flex items-center text-sm text-gray-500 mb-3">
                  <time datetime={article.date}>
                    {new Date(article.date).toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'long',
                      day: 'numeric'
                    })}
                  </time>
                  <span class="mx-2">•</span>
                  <span>{article.readTime}</span>
                </div>
                
                <h2 class="text-xl font-bold text-[var(--color-dark)] mb-3 line-clamp-2">
                  {article.title}
                </h2>
                
                <p class="text-gray-600 mb-4 line-clamp-3">
                  {article.excerpt}
                </p>
                
                <div class="flex flex-wrap gap-2 mb-4">
                  {article.tags.slice(0, 2).map((tag) => (
                    <span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">
                      #{tag}
                    </span>
                  ))}
                </div>
                
                <a 
                  href={`/en/blog/${article.slug}`}
                  class="inline-flex items-center text-[var(--color-primary)] font-medium hover:text-[var(--color-primary)]/80 transition-colors duration-200"
                >
                  Read more
                  <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </a>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>

    <!-- Newsletter Subscription -->
    <section class="bg-[var(--color-dark)] py-16">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">
          Stay informed
        </h2>
        <p class="text-gray-300 mb-8 text-lg">
          Get storage tips and special offers delivered straight to your inbox.
        </p>
        
        <form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
          <input 
            type="email" 
            placeholder="Your email address"
            class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"
            required
          >
          <button 
            type="submit"
            class="bg-[var(--color-primary)] text-white px-6 py-3 rounded-lg font-medium hover:bg-[var(--color-primary)]/90 transition-colors duration-200"
          >
            Subscribe
          </button>
        </form>
      </div>
    </section>
  </main>
</Layout>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
