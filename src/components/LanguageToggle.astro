---
import { getLangFromUrl, getLocalizedUrl, getAlternateLocale } from '../i18n/utils';

const currentLocale = getLangFromUrl(Astro.url);
const alternateLocale = getAlternateLocale(currentLocale);
const alternateUrl = getLocalizedUrl(Astro.url, alternateLocale);
---

<div class="language-toggle flex items-center space-x-2">
  <a 
    href={alternateUrl}
    class="flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-300 group"
    title={currentLocale === 'es' ? 'Switch to English' : 'Cambiar a Español'}
  >
    <!-- Bandera actual -->
    <div class="relative w-6 h-4 rounded-sm overflow-hidden shadow-sm">
      {currentLocale === 'es' ? (
        <img 
          src="/panama.webp"
          alt="Bandera de Panamá"
          class="w-full h-full object-cover"
          loading="lazy"
        />
      ) : (
        <img 
          src="/usa.webp"
          alt="USA Flag"
          class="w-full h-full object-cover"
          loading="lazy"
        />
      )}
    </div>
    

    
    <!-- Icono de cambio -->
    <svg class="w-4 h-4 text-gray-400 group-hover:text-[var(--color-primary)] transition-all duration-300 group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
    </svg>
  </a>
</div>

<style>
  .language-toggle {
    user-select: none;
  }
  
  .language-toggle a:hover {
    transform: translateY(-1px);
  }
  
  .language-toggle svg {
    transition: all 0.3s ease;
  }
  
  .language-toggle:hover svg {
    transform: scale(1.1);
  }
</style>
