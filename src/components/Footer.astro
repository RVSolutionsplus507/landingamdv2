---
// Footer exactamente idéntico al prototipo de Figma
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<footer class="bg-[var(--color-dark)] text-white" role="contentinfo" aria-label="Información de contacto y enlaces">
  <!-- Main Footer Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  
    <div class="flex flex-col items-center text-center md:flex-row md:items-center md:text-left mb-8">
      <!-- Logo centrado en mobile, izquierda en desktop -->
      <div class="mb-6 md:mb-0">
        <img src="/Images/amdlogo.webp" 
          alt="Almacenajes Mini Depósitos - Logo blanco" 
          class="h-10 md:h-12 w-auto mx-auto md:mx-0"
          width="120"
          height="48"
         loading="eager">
      </div>
      
      <!-- Título centrado en mobile, cerca del logo en desktop -->
      <div class="md:ml-28 md:text-center">
        <h2 class="text-3xl md:text-3xl font-bold text-white" id="footer-title">
          {t('footer.title')}
        </h2>
      </div>
    </div>
    
    <!-- Grid de 2 columnas para horarios -->
    <div class="max-w-4xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
      
      <!-- Columna Izquierda: Horario de Acceso -->
      <div class="text-center">
        <div class="flex items-center justify-center mb-3">
          <svg width="24" height="24" viewBox="0 0 39 38" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Reloj">
            <path d="M19.5001 9.50033V19.0003L25.8334 22.167M35.3334 19.0003C35.3334 27.7448 28.2446 34.8337 19.5001 34.8337C10.7556 34.8337 3.66675 27.7448 3.66675 19.0003C3.66675 10.2558 10.7556 3.16699 19.5001 3.16699C28.2446 3.16699 35.3334 10.2558 35.3334 19.0003Z" stroke="#EF7B34" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="text-primary font-medium text-xl mb-2">
          {t('footer.access.title')}
        </h3>
        <div class="text-gray-300 text-base">
          <p>{t('footer.access.days')}</p>
          <p>{t('footer.access.hours')}</p>
        </div>
        
        <!-- Botón CTA en la columna izquierda -->
        <div class="mt-4">
          <a 
            href="#cotizacion" 
            class="inline-block border border-[var(--color-primary)] text-[var(--color-primary)] px-6 py-2 rounded font-normal text-sm hover:bg-[var(--color-primary)] hover:text-white transition-all duration-300 text-center leading-tight"
          >
            <span class="block pointer-events-none">
              {t('footer.access.cta').split('\n')[0]}
            </span>
            <span class="block pointer-events-none">
              {t('footer.access.cta').split('\n')[1]}
            </span>
          </a>
        </div>
      </div>
      
      <!-- Columna Derecha: Horario de Oficinas -->
      <div class="text-center">
        <div class="flex items-center justify-center mb-3">
          <svg width="24" height="24" viewBox="0 0 39 38" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Reloj">
            <path d="M19.5001 9.50033V19.0003L25.8334 22.167M35.3334 19.0003C35.3334 27.7448 28.2446 34.8337 19.5001 34.8337C10.7556 34.8337 3.66675 27.7448 3.66675 19.0003C3.66675 10.2558 10.7556 3.16699 19.5001 3.16699C28.2446 3.16699 35.3334 10.2558 35.3334 19.0003Z" stroke="#EF7B34" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 class="text-primary font-medium text-xl mb-2">
          {t('footer.office.title')}
        </h3>
        <div class="text-gray-300 text-md">
          <p>{t('footer.office.weekdays')}</p>
          <p>{t('footer.office.weekhours')}</p>
          <div class="mt-2">
            <p>{t('footer.office.saturday')}</p>
            <p>{t('footer.office.sathours')}</p>
          </div>
        </div>
      </div>
      
      </div>
    </div>
    
    <!-- Redes Sociales - Fuera del grid, centradas -->
    <div class="text-center mb-6">
      <p class="text-gray-300 text-sm mb-4">{t('footer.social')}</p>
      <div class="flex justify-center space-x-6">
        <a 
          href="https://www.instagram.com/almacenajespma/" 
          class="w-12 h-12 flex items-center justify-center hover:opacity-80 transition-opacity duration-200"
          aria-label="Síguenos en Instagram - Almacenajes Mini Depósitos"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg width="32" height="32" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M42.2916 15.708H42.3158M16.9166 4.83301H41.0833C47.7567 4.83301 53.1666 10.2429 53.1666 16.9163V41.083C53.1666 47.7564 47.7567 53.1663 41.0833 53.1663H16.9166C10.2431 53.1663 4.83325 47.7564 4.83325 41.083V16.9163C4.83325 10.2429 10.2431 4.83301 16.9166 4.83301ZM38.6666 27.4772C38.9648 29.4884 38.6213 31.5425 37.6848 33.3473C36.7484 35.1521 35.2667 36.6156 33.4505 37.5297C31.6343 38.4439 29.5762 38.762 27.5687 38.439C25.5613 38.116 23.7068 37.1682 22.2691 35.7305C20.8314 34.2928 19.8836 32.4383 19.5606 30.4309C19.2376 28.4234 19.5557 26.3653 20.4699 24.5491C21.384 22.7329 22.8475 21.2512 24.6523 20.3148C26.4571 19.3783 28.5112 19.0348 30.5224 19.333C32.574 19.6372 34.4733 20.5932 35.9398 22.0597C37.4064 23.5263 38.3624 25.4256 38.6666 27.4772Z" stroke="#EF7B34" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <a 
          href="https://www.facebook.com/almacenajespma" 
          class="w-12 h-12 flex items-center justify-center hover:opacity-80 transition-opacity duration-200"
          aria-label="Síguenos en Facebook - Almacenajes Mini Depósitos"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg width="32" height="32" viewBox="0 0 32 54" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M29.5001 2.83301H22.2501C19.0454 2.83301 15.9719 4.10607 13.7059 6.37213C11.4398 8.6382 10.1667 11.7116 10.1667 14.9163V22.1663H2.91675V31.833H10.1667V51.1663H19.8334V31.833H27.0834L29.5001 22.1663H19.8334V14.9163C19.8334 14.2754 20.088 13.6607 20.5412 13.2075C20.9945 12.7543 21.6091 12.4997 22.2501 12.4997H29.5001V2.83301Z" stroke="#EF7B34" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <a 
          href="https://twitter.com/almacenajespma" 
          class="w-12 h-12 flex items-center justify-center hover:opacity-80 transition-opacity duration-200"
          aria-label="Síguenos en X (Twitter) - Almacenajes Mini Depósitos"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg width="32" height="32" viewBox="0 0 70 70" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_377_527)">
              <mask id="mask0_377_527" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="70" height="70">
                <path d="M70 0H0V70H70V0Z" fill="white"/>
              </mask>
              <g mask="url(#mask0_377_527)">
                <path d="M48.6587 13.6719H55.895L40.0859 31.7406L58.684 56.3281H44.1219L32.7162 41.4159L19.6656 56.3281H12.425L29.3344 37.0016L11.4932 13.6719H26.425L36.7347 27.3022L48.6587 13.6719ZM46.119 51.9969H50.1287L24.2462 17.7756H19.9434L46.119 51.9969Z" fill="#EF7B34"/>
              </g>
            </g>
            <defs>
              <clipPath id="clip0_377_527">
                <rect width="70" height="70" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </a>
      </div>
    </div>
    
    <!-- Copyright - Fuera del grid, centrado -->
    <div class="text-center">
      <p class="text-gray-400 text-sm">
        {t('footer.copyright')}
      </p>
    </div>
    
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Smooth scroll para enlaces del footer
    const footerLinks = document.querySelectorAll('footer a[href^="#"]');
    footerLinks.forEach(link => {
      link.addEventListener('click', function(e: Event) {
        e.preventDefault();
        const target = e.target as HTMLAnchorElement;
        const targetId = target.getAttribute('href');
        const targetElement = document.querySelector(targetId || '');
        
        if (targetElement) {
          const element = targetElement as HTMLElement;
          // Ajuste específico para diferentes secciones
          let offsetAdjustment = 80; // Default para navbar fijo
          
          // Para la sección de cotización, usar menos offset para centrarla mejor
          if (targetId === '#cotizacion') {
            offsetAdjustment = 20;
          }
          
          const offsetTop = element.offsetTop - offsetAdjustment;
          window.scrollTo({
            top: Math.max(0, offsetTop), // Asegurar que no sea negativo
            behavior: 'smooth'
          });
        }
      });
    });
  });
</script>
